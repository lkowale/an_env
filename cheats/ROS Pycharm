# for in ide run scripts using rospy you need to
PyCharm plugin called EnvFile
https://stackoverflow.com/questions/42708389/how-to-set-environment-variables-in-pycharm

file .env content
ROS_ROOT=/opt/ros/kinetic/share/ros
ROS_MASTER_URI=http://localhost:11311
ROS_PACKAGE_PATH=/home/aa/an_env/src:/home/aa/image_transport_ws/src:/opt/ros/kinetic/share

after that when you want run a script you must edit its run configurations ( click dropdown box to the left of run icon
in upper right corner) pick envfile tab, add env file to be loaded before start